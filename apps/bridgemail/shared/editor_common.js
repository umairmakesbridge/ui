Enumerable=function(){var v="Single:sequence contains more than one element.",D=true,G=null,H=false,F=function(b){this.GetEnumerator=b};F.Choice=function(){var b=arguments[0] instanceof Array?arguments[0]:arguments;return new F(function(){return new C(B.Blank,function(){return this.Yield(b[Math.floor(Math.random()*b.length)])},B.Blank)})};F.Cycle=function(){var b=arguments[0] instanceof Array?arguments[0]:arguments;return new F(function(){var a=0;return new C(B.Blank,function(){if(a>=b.length){a=0}return this.Yield(b[a++])},B.Blank)})};F.Empty=function(){return new F(function(){return new C(B.Blank,function(){return H},B.Blank)})};F.From=function(a){if(a==G){return F.Empty()}if(a instanceof F){return a}if(typeof a==z.Number||typeof a==z.Boolean){return F.Repeat(a,1)}if(typeof a==z.String){return new F(function(){var c=0;return new C(B.Blank,function(){return c<a.length?this.Yield(a.charAt(c++)):H},B.Blank)})}if(typeof a!=z.Function){if(typeof a.length==z.Number){return new A(a)}if(!(a instanceof Object)&&E.IsIEnumerable(a)){return new F(function(){var e=D,d;return new C(function(){d=new Enumerator(a)},function(){if(e){e=H}else{d.moveNext()}return d.atEnd()?H:this.Yield(d.item())},B.Blank)})}}return new F(function(){var d=[],e=0;return new C(function(){for(var b in a){!(a[b] instanceof Function)&&d.push({Key:b,Value:a[b]})}},function(){return e<d.length?this.Yield(d[e++]):H},B.Blank)})},F.Return=function(b){return F.Repeat(b,1)};F.Matches=function(a,b,c){if(c==G){c=""}if(b instanceof RegExp){c+=b.ignoreCase?"i":"";c+=b.multiline?"m":"";b=b.source}if(c.indexOf("g")===-1){c+="g"}return new F(function(){var d;return new C(function(){d=new RegExp(b,c)},function(){var e=d.exec(a);return e?this.Yield(e):H},B.Blank)})};F.Range=function(c,f,b){if(b==G){b=1}return F.ToInfinity(c,b).Take(f)};F.RangeDown=function(c,f,b){if(b==G){b=1}return F.ToNegativeInfinity(c,b).Take(f)};F.RangeTo=function(f,c,b){if(b==G){b=1}return f<c?F.ToInfinity(f,b).TakeWhile(function(d){return d<=c}):F.ToNegativeInfinity(f,b).TakeWhile(function(d){return d>=c})};F.Repeat=function(c,b){return b!=G?F.Repeat(c).Take(b):new F(function(){return new C(B.Blank,function(){return this.Yield(c)},B.Blank)})};F.RepeatWithFinalize=function(b,c){b=E.CreateLambda(b);c=E.CreateLambda(c);return new F(function(){var a;return new C(function(){a=b()},function(){return this.Yield(a)},function(){if(a!=G){c(a);a=G}})})};F.Generate=function(b,c){if(c!=G){return F.Generate(b).Take(c)}b=E.CreateLambda(b);return new F(function(){return new C(B.Blank,function(){return this.Yield(b())},B.Blank)})};F.ToInfinity=function(c,b){if(c==G){c=0}if(b==G){b=1}return new F(function(){var a;return new C(function(){a=c-b},function(){return this.Yield(a+=b)},B.Blank)})};F.ToNegativeInfinity=function(c,b){if(c==G){c=0}if(b==G){b=1}return new F(function(){var a;return new C(function(){a=c+b},function(){return this.Yield(a-=b)},B.Blank)})};F.Unfold=function(c,a){a=E.CreateLambda(a);return new F(function(){var b=D,e;return new C(B.Blank,function(){if(b){b=H;e=c;return this.Yield(e)}e=a(e);return this.Yield(e)},B.Blank)})};F.prototype={CascadeBreadthFirst:function(d,a){var c=this;d=E.CreateLambda(d);a=E.CreateLambda(a);return new F(function(){var f,b=0,e=[];return new C(function(){f=c.GetEnumerator()},function(){while(D){if(f.MoveNext()){e.push(f.Current());return this.Yield(a(f.Current(),b))}var g=F.From(e).SelectMany(function(h){return d(h)});if(!g.Any()){return H}else{b++;e=[];E.Dispose(f);f=g.GetEnumerator()}}},function(){E.Dispose(f)})})},CascadeDepthFirst:function(d,a){var c=this;d=E.CreateLambda(d);a=E.CreateLambda(a);return new F(function(){var b=[],e;return new C(function(){e=c.GetEnumerator()},function(){while(D){if(e.MoveNext()){var g=a(e.Current(),b.length);b.push(e);e=F.From(d(e.Current())).GetEnumerator();return this.Yield(g)}if(b.length<=0){return H}E.Dispose(e);e=b.pop()}},function(){try{E.Dispose(e)}finally{F.From(b).ForEach(function(f){f.Dispose()})}})})},Flatten:function(){var a=this;return new F(function(){var b,c=G;return new C(function(){b=a.GetEnumerator()},function(){while(D){if(c!=G){if(c.MoveNext()){return this.Yield(c.Current())}else{c=G}}if(b.MoveNext()){if(b.Current() instanceof Array){E.Dispose(c);c=F.From(b.Current()).SelectMany(B.Identity).Flatten().GetEnumerator();continue}else{return this.Yield(b.Current())}}return H}},function(){try{E.Dispose(b)}finally{E.Dispose(c)}})})},Pairwise:function(a){var c=this;a=E.CreateLambda(a);return new F(function(){var b;return new C(function(){b=c.GetEnumerator();b.MoveNext()},function(){var e=b.Current();return b.MoveNext()?this.Yield(a(e,b.Current())):H},function(){E.Dispose(b)})})},Scan:function(c,e,b){if(b!=G){return this.Scan(c,e).Select(b)}var d;if(e==G){e=E.CreateLambda(c);d=H}else{e=E.CreateLambda(e);d=D}var a=this;return new F(function(){var f,h,g=D;return new C(function(){f=a.GetEnumerator()},function(){if(g){g=H;if(!d){if(f.MoveNext()){return this.Yield(h=f.Current())}}else{return this.Yield(h=c)}}return f.MoveNext()?this.Yield(h=e(h,f.Current())):H},function(){E.Dispose(f)})})},Select:function(a){var c=this;a=E.CreateLambda(a);return new F(function(){var d,b=0;return new C(function(){d=c.GetEnumerator()},function(){return d.MoveNext()?this.Yield(a(d.Current(),b++)):H},function(){E.Dispose(d)})})},SelectMany:function(b,c){var a=this;b=E.CreateLambda(b);if(c==G){c=function(d,e){return e}}c=E.CreateLambda(c);return new F(function(){var e,f=undefined,d=0;return new C(function(){e=a.GetEnumerator()},function(){if(f===undefined){if(!e.MoveNext()){return H}}do{if(f==G){var g=b(e.Current(),d++);f=F.From(g).GetEnumerator()}if(f.MoveNext()){return this.Yield(c(e.Current(),f.Current()))}E.Dispose(f);f=G}while(e.MoveNext());return H},function(){try{E.Dispose(e)}finally{E.Dispose(f)}})})},Where:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var d,b=0;return new C(function(){d=c.GetEnumerator()},function(){while(d.MoveNext()){if(a(d.Current(),b++)){return this.Yield(d.Current())}}return H},function(){E.Dispose(d)})})},OfType:function(d){var b;switch(d){case Number:b=z.Number;break;case String:b=z.String;break;case Boolean:b=z.Boolean;break;case Function:b=z.Function;break;default:b=G}return b===G?this.Where(function(c){return c instanceof d}):this.Where(function(a){return typeof a===b})},Zip:function(d,a){a=E.CreateLambda(a);var c=this;return new F(function(){var e,f,b=0;return new C(function(){e=c.GetEnumerator();f=F.From(d).GetEnumerator()},function(){return e.MoveNext()&&f.MoveNext()?this.Yield(a(e.Current(),f.Current(),b++)):H},function(){try{E.Dispose(e)}finally{E.Dispose(f)}})})},Join:function(a,e,f,c,d){e=E.CreateLambda(e);f=E.CreateLambda(f);c=E.CreateLambda(c);d=E.CreateLambda(d);var b=this;return new F(function(){var j,g,i=G,h=0;return new C(function(){j=b.GetEnumerator();g=F.From(a).ToLookup(f,B.Identity,d)},function(){while(D){if(i!=G){var l=i[h++];if(l!==undefined){return this.Yield(c(j.Current(),l))}l=G;h=0}if(j.MoveNext()){var k=e(j.Current());i=g.Get(k).ToArray()}else{return H}}},function(){E.Dispose(j)})})},GroupJoin:function(a,f,g,c,d){f=E.CreateLambda(f);g=E.CreateLambda(g);c=E.CreateLambda(c);d=E.CreateLambda(d);var b=this;return new F(function(){var e=b.GetEnumerator(),h=G;return new C(function(){e=b.GetEnumerator();h=F.From(a).ToLookup(g,B.Identity,d)},function(){if(e.MoveNext()){var i=h.Get(f(e.Current()));return this.Yield(c(e.Current(),i))}return H},function(){E.Dispose(e)})})},All:function(a){a=E.CreateLambda(a);var d=D;this.ForEach(function(b){if(!a(b)){d=H;return H}});return d},Any:function(d){d=E.CreateLambda(d);var a=this.GetEnumerator();try{if(arguments.length==0){return a.MoveNext()}while(a.MoveNext()){if(d(a.Current())){return D}}return H}finally{E.Dispose(a)}},Concat:function(b){var a=this;return new F(function(){var c,d;return new C(function(){c=a.GetEnumerator()},function(){if(d==G){if(c.MoveNext()){return this.Yield(c.Current())}d=F.From(b).GetEnumerator()}return d.MoveNext()?this.Yield(d.Current()):H},function(){try{E.Dispose(c)}finally{E.Dispose(d)}})})},Insert:function(c,a){var d=this;return new F(function(){var f,g,b=0,e=H;return new C(function(){f=d.GetEnumerator();g=F.From(a).GetEnumerator()},function(){if(b==c&&g.MoveNext()){e=D;return this.Yield(g.Current())}if(f.MoveNext()){b++;return this.Yield(f.Current())}return !e&&g.MoveNext()?this.Yield(g.Current()):H},function(){try{E.Dispose(f)}finally{E.Dispose(g)}})})},Alternate:function(b){b=F.Return(b);return this.SelectMany(function(a){return F.Return(a).Concat(b)}).TakeExceptLast()},Contains:function(d,a){a=E.CreateLambda(a);var e=this.GetEnumerator();try{while(e.MoveNext()){if(a(e.Current())===d){return D}}return H}finally{E.Dispose(e)}},DefaultIfEmpty:function(a){var c=this;return new F(function(){var d,b=D;return new C(function(){d=c.GetEnumerator()},function(){if(d.MoveNext()){b=H;return this.Yield(d.Current())}else{if(b){b=H;return this.Yield(a)}}return H},function(){E.Dispose(d)})})},Distinct:function(b){return this.Except(F.Empty(),b)},Except:function(d,a){a=E.CreateLambda(a);var c=this;return new F(function(){var e,b;return new C(function(){e=c.GetEnumerator();b=new u(a);F.From(d).ForEach(function(f){b.Add(f)})},function(){while(e.MoveNext()){var f=e.Current();if(!b.Contains(f)){b.Add(f);return this.Yield(f)}}return H},function(){E.Dispose(e)})})},Intersect:function(d,a){a=E.CreateLambda(a);var c=this;return new F(function(){var f,e,b;return new C(function(){f=c.GetEnumerator();e=new u(a);F.From(d).ForEach(function(g){e.Add(g)});b=new u(a)},function(){while(f.MoveNext()){var g=f.Current();if(!b.Contains(g)&&e.Contains(g)){b.Add(g);return this.Yield(g)}}return H},function(){E.Dispose(f)})})},SequenceEqual:function(c,e){e=E.CreateLambda(e);var d=this.GetEnumerator();try{var a=F.From(c).GetEnumerator();try{while(d.MoveNext()){if(!a.MoveNext()||e(d.Current())!==e(a.Current())){return H}}return a.MoveNext()?H:D}finally{E.Dispose(a)}}finally{E.Dispose(d)}},Union:function(d,a){a=E.CreateLambda(a);var c=this;return new F(function(){var b,f,e;return new C(function(){b=c.GetEnumerator();e=new u(a)},function(){var g;if(f===undefined){while(b.MoveNext()){g=b.Current();if(!e.Contains(g)){e.Add(g);return this.Yield(g)}}f=F.From(d).GetEnumerator()}while(f.MoveNext()){g=f.Current();if(!e.Contains(g)){e.Add(g);return this.Yield(g)}}return H},function(){try{E.Dispose(b)}finally{E.Dispose(f)}})})},OrderBy:function(a){return new y(this,a,H)},OrderByDescending:function(b){return new y(this,b,D)},Reverse:function(){var a=this;return new F(function(){var e,b;return new C(function(){e=a.ToArray();b=e.length},function(){return b>0?this.Yield(e[--b]):H},B.Blank)})},Shuffle:function(){var a=this;return new F(function(){var b;return new C(function(){b=a.ToArray()},function(){if(b.length>0){var c=Math.floor(Math.random()*b.length);return this.Yield(b.splice(c,1)[0])}return H},B.Blank)})},GroupBy:function(b,c,f,d){var a=this;b=E.CreateLambda(b);c=E.CreateLambda(c);if(f!=G){f=E.CreateLambda(f)}d=E.CreateLambda(d);return new F(function(){var e;return new C(function(){e=a.ToLookup(b,c,d).ToEnumerable().GetEnumerator()},function(){while(e.MoveNext()){return f==G?this.Yield(e.Current()):this.Yield(f(e.Current().Key(),e.Current()))}return H},function(){E.Dispose(e)})})},PartitionBy:function(c,d,f,e){var a=this;c=E.CreateLambda(c);d=E.CreateLambda(d);e=E.CreateLambda(e);var b;if(f==G){b=H;f=function(g,h){return new t(g,h)}}else{b=D;f=E.CreateLambda(f)}return new F(function(){var h,j,i,g=[];return new C(function(){h=a.GetEnumerator();if(h.MoveNext()){j=c(h.Current());i=e(j);g.push(d(h.Current()))}},function(){var l;while((l=h.MoveNext())==D){if(i===e(c(h.Current()))){g.push(d(h.Current()))}else{break}}if(g.length>0){var k=b?f(j,F.From(g)):f(j,g);if(l){j=c(h.Current());i=e(j);g=[d(h.Current())]}else{g=[]}return this.Yield(k)}return H},function(){E.Dispose(h)})})},BufferWithCount:function(c){var a=this;return new F(function(){var b;return new C(function(){b=a.GetEnumerator()},function(){var e=[],f=0;while(b.MoveNext()){e.push(b.Current());if(++f>=c){return this.Yield(e)}}return e.length>0?this.Yield(e):H},function(){E.Dispose(b)})})},Aggregate:function(f,d,e){return this.Scan(f,d,e).Last()},Average:function(e){e=E.CreateLambda(e);var f=0,d=0;this.ForEach(function(a){f+=e(a);++d});return f/d},Count:function(b){b=b==G?B.True:E.CreateLambda(b);var d=0;this.ForEach(function(c,a){if(b(c,a)){++d}});return d},Max:function(b){if(b==G){b=B.Identity}return this.Select(b).Aggregate(function(d,c){return d>c?d:c})},Min:function(b){if(b==G){b=B.Identity}return this.Select(b).Aggregate(function(d,c){return d<c?d:c})},MaxBy:function(b){b=E.CreateLambda(b);return this.Aggregate(function(a,d){return b(a)>b(d)?a:d})},MinBy:function(b){b=E.CreateLambda(b);return this.Aggregate(function(a,d){return b(a)<b(d)?a:d})},Sum:function(b){if(b==G){b=B.Identity}return this.Select(b).Aggregate(0,function(d,c){return d+c})},ElementAt:function(e){var f,a=H;this.ForEach(function(b,c){if(c==e){f=b;a=D;return H}});if(!a){throw new Error("index is less than 0 or greater than or equal to the number of elements in source.")}return f},ElementAtOrDefault:function(e,g){var h,a=H;this.ForEach(function(b,c){if(c==e){h=b;a=D;return H}});return !a?g:h},First:function(e){if(e!=G){return this.Where(e).First()}var a,b=H;this.ForEach(function(c){a=c;b=D;return H});if(!b){throw new Error("First:No element satisfies the condition.")}return a},FirstOrDefault:function(h,e){if(e!=G){return this.Where(e).FirstOrDefault(h)}var a,b=H;this.ForEach(function(c){a=c;b=D;return H});return !b?h:a},Last:function(e){if(e!=G){return this.Where(e).Last()}var a,b=H;this.ForEach(function(c){b=D;a=c});if(!b){throw new Error("Last:No element satisfies the condition.")}return a},LastOrDefault:function(h,e){if(e!=G){return this.Where(e).LastOrDefault(h)}var a,b=H;this.ForEach(function(c){b=D;a=c});return !b?h:a},Single:function(b){if(b!=G){return this.Where(b).Single()}var a,e=H;this.ForEach(function(c){if(!e){e=D;a=c}else{throw new Error(v)}});if(!e){throw new Error("Single:No element satisfies the condition.")}return a},SingleOrDefault:function(e,b){if(b!=G){return this.Where(b).SingleOrDefault(e)}var a,h=H;this.ForEach(function(c){if(!h){h=D;a=c}else{throw new Error(v)}});return !h?e:a},Skip:function(c){var a=this;return new F(function(){var d,b=0;return new C(function(){d=a.GetEnumerator();while(b++<c&&d.MoveNext()){}},function(){return d.MoveNext()?this.Yield(d.Current()):H},function(){E.Dispose(d)})})},SkipWhile:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var e,b=0,d=H;return new C(function(){e=c.GetEnumerator()},function(){while(!d){if(e.MoveNext()){if(!a(e.Current(),b++)){d=D;return this.Yield(e.Current())}continue}else{return H}}return e.MoveNext()?this.Yield(e.Current()):H},function(){E.Dispose(e)})})},Take:function(c){var a=this;return new F(function(){var d,b=0;return new C(function(){d=a.GetEnumerator()},function(){return b++<c&&d.MoveNext()?this.Yield(d.Current()):H},function(){E.Dispose(d)})})},TakeWhile:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var d,b=0;return new C(function(){d=c.GetEnumerator()},function(){return d.MoveNext()&&a(d.Current(),b++)?this.Yield(d.Current()):H},function(){E.Dispose(d)})})},TakeExceptLast:function(b){if(b==G){b=1}var a=this;return new F(function(){if(b<=0){return a.GetEnumerator()}var d,e=[];return new C(function(){d=a.GetEnumerator()},function(){while(d.MoveNext()){if(e.length==b){e.push(d.Current());return this.Yield(e.shift())}e.push(d.Current())}return H},function(){E.Dispose(d)})})},TakeFromLast:function(b){if(b<=0||b==G){return F.Empty()}var a=this;return new F(function(){var c,e,d=[];return new C(function(){c=a.GetEnumerator()},function(){while(c.MoveNext()){d.length==b&&d.shift();d.push(c.Current())}if(e==G){e=F.From(d).GetEnumerator()}return e.MoveNext()?this.Yield(e.Current()):H},function(){E.Dispose(e)})})},IndexOf:function(d){var b=G;this.ForEach(function(c,a){if(c===d){b=a;return D}});return b!==G?b:-1},LastIndexOf:function(c){var d=-1;this.ForEach(function(a,b){if(a===c){d=b}});return d},ToArray:function(){var b=[];this.ForEach(function(a){b.push(a)});return b},ToLookup:function(h,d,f){h=E.CreateLambda(h);d=E.CreateLambda(d);f=E.CreateLambda(f);var g=new u(f);this.ForEach(function(c){var e=h(c),b=d(c),i=g.Get(e);if(i!==undefined){i.push(b)}else{g.Add(e,[b])}});return new r(g)},ToObject:function(d,e){d=E.CreateLambda(d);e=E.CreateLambda(e);var f={};this.ForEach(function(a){f[d(a)]=e(a)});return f},ToDictionary:function(h,d,f){h=E.CreateLambda(h);d=E.CreateLambda(d);f=E.CreateLambda(f);var g=new u(f);this.ForEach(function(b){g.Add(h(b),d(b))});return g},ToJSON:function(d,c){return JSON.stringify(this.ToArray(),d,c)},ToString:function(b,d){if(b==G){b=""}if(d==G){d=B.Identity}return this.Select(d).ToArray().join(b)},Do:function(a){var c=this;a=E.CreateLambda(a);return new F(function(){var d,b=0;return new C(function(){d=c.GetEnumerator()},function(){if(d.MoveNext()){a(d.Current(),b++);return this.Yield(d.Current())}return H},function(){E.Dispose(d)})})},ForEach:function(f){f=E.CreateLambda(f);var d=0,a=this.GetEnumerator();try{while(a.MoveNext()){if(f(a.Current(),d++)===H){break}}}finally{E.Dispose(a)}},Write:function(d,b){if(d==G){d=""}b=E.CreateLambda(b);var a=D;this.ForEach(function(c){if(a){a=H}else{document.write(d)}document.write(b(c))})},WriteLine:function(b){b=E.CreateLambda(b);this.ForEach(function(a){document.write(b(a));document.write("<br />")})},Force:function(){var b=this.GetEnumerator();try{while(b.MoveNext()){}}finally{E.Dispose(b)}},Let:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var b;return new C(function(){b=F.From(a(c)).GetEnumerator()},function(){return b.MoveNext()?this.Yield(b.Current()):H},function(){E.Dispose(b)})})},Share:function(){var a=this,b;return new F(function(){return new C(function(){if(b==G){b=a.GetEnumerator()}},function(){return b.MoveNext()?this.Yield(b.Current()):H},B.Blank)})},MemoizeAll:function(){var a=this,b,c;return new F(function(){var d=-1;return new C(function(){if(c==G){c=a.GetEnumerator();b=[]}},function(){d++;return b.length<=d?c.MoveNext()?this.Yield(b[d]=c.Current()):H:this.Yield(b[d])},B.Blank)})},Catch:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var b;return new C(function(){b=c.GetEnumerator()},function(){try{return b.MoveNext()?this.Yield(b.Current()):H}catch(e){a(e);return H}},function(){E.Dispose(b)})})},Finally:function(a){a=E.CreateLambda(a);var c=this;return new F(function(){var b;return new C(function(){b=c.GetEnumerator()},function(){return b.MoveNext()?this.Yield(b.Current()):H},function(){try{E.Dispose(b)}finally{a()}})})},Trace:function(d,b){if(d==G){d="Trace"}b=E.CreateLambda(b);return this.Do(function(a){console.log(d,":",b(a))})}};var B={Identity:function(b){return b},True:function(){return D},Blank:function(){}},z={Boolean:typeof D,Number:typeof 0,String:typeof"",Object:typeof{},Undefined:typeof undefined,Function:typeof function(){}},E={CreateLambda:function(b){if(b==G){return B.Identity}if(typeof b==z.String){if(b==""){return B.Identity}else{if(b.indexOf("=>")==-1){return new Function("$,$$,$$$,$$$$","return "+b)}else{var d=b.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return new Function(d[1],"return "+d[2])}}}return b},IsIEnumerable:function(a){if(typeof Enumerator!=z.Undefined){try{new Enumerator(a);return D}catch(d){}}return H},Compare:function(d,c){return d===c?0:d>c?1:-1},Dispose:function(b){b!=G&&b.Dispose()}},x={Before:0,Running:1,After:2},C=function(i,h,e){var j=new s,a=x.Before;this.Current=j.Current;this.MoveNext=function(){try{switch(a){case x.Before:a=x.Running;i();case x.Running:if(h.apply(j)){return D}else{this.Dispose();return H}case x.After:return H}}catch(b){this.Dispose();throw b}};this.Dispose=function(){if(a!=x.Running){return}try{e()}finally{a=x.After}}},s=function(){var b=G;this.Current=function(){return b};this.Yield=function(a){b=a;return D}},y=function(h,d,j,i){var g=this;g.source=h;g.keySelector=E.CreateLambda(d);g.descending=j;g.parent=i};y.prototype=new F;y.prototype.CreateOrderedEnumerable=function(d,c){return new y(this.source,d,c,this)};y.prototype.ThenBy=function(a){return this.CreateOrderedEnumerable(a,H)};y.prototype.ThenByDescending=function(b){return this.CreateOrderedEnumerable(b,D)};y.prototype.GetEnumerator=function(){var a=this,f,g,b=0;return new C(function(){f=[];g=[];a.source.ForEach(function(d,e){f.push(d);g.push(e)});var c=w.Create(a,G);c.GenerateKeys(f);g.sort(function(d,e){return c.Compare(d,e)})},function(){return b<g.length?this.Yield(f[g[b++]]):H},B.Blank)};var w=function(h,g,f){var b=this;b.keySelector=h;b.descending=g;b.child=f;b.keys=G};w.Create=function(b,e){var f=new w(b.keySelector,b.descending,e);return b.parent!=G?w.Create(b.parent,f):f};w.prototype.GenerateKeys=function(k){var b=this;for(var i=k.length,h=b.keySelector,j=new Array(i),l=0;l<i;l++){j[l]=h(k[l])}b.keys=j;b.child!=G&&b.child.GenerateKeys(k)};w.prototype.Compare=function(g,d){var b=this,h=E.Compare(b.keys[g],b.keys[d]);if(h==0){if(b.child!=G){return b.child.Compare(g,d)}h=E.Compare(g,d)}return b.descending?-h:h};var A=function(b){this.source=b};A.prototype=new F;A.prototype.Any=function(b){return b==G?this.source.length>0:F.prototype.Any.apply(this,arguments)};A.prototype.Count=function(b){return b==G?this.source.length:F.prototype.Count.apply(this,arguments)};A.prototype.ElementAt=function(b){return 0<=b&&b<this.source.length?this.source[b]:F.prototype.ElementAt.apply(this,arguments)};A.prototype.ElementAtOrDefault=function(d,c){return 0<=d&&d<this.source.length?this.source[d]:c};A.prototype.First=function(b){return b==G&&this.source.length>0?this.source[0]:F.prototype.First.apply(this,arguments)};A.prototype.FirstOrDefault=function(b,c){return c!=G?F.prototype.FirstOrDefault.apply(this,arguments):this.source.length>0?this.source[0]:b};A.prototype.Last=function(c){var b=this;return c==G&&b.source.length>0?b.source[b.source.length-1]:F.prototype.Last.apply(b,arguments)};A.prototype.LastOrDefault=function(f,c){var b=this;return c!=G?F.prototype.LastOrDefault.apply(b,arguments):b.source.length>0?b.source[b.source.length-1]:f};A.prototype.Skip=function(c){var a=this.source;return new F(function(){var b;return new C(function(){b=c<0?0:c},function(){return b<a.length?this.Yield(a[b++]):H},B.Blank)})};A.prototype.TakeExceptLast=function(b){if(b==G){b=1}return this.Take(this.source.length-b)};A.prototype.TakeFromLast=function(b){return this.Skip(this.source.length-b)};A.prototype.Reverse=function(){var a=this.source;return new F(function(){var b;return new C(function(){b=a.length},function(){return b>0?this.Yield(a[--b]):H},B.Blank)})};A.prototype.SequenceEqual=function(b,a){return(b instanceof A||b instanceof Array)&&a==G&&F.From(b).Count()!=this.Count()?H:F.prototype.SequenceEqual.apply(this,arguments)};A.prototype.ToString=function(b,c){if(c!=G||!(this.source instanceof Array)){return F.prototype.ToString.apply(this,arguments)}if(b==G){b=""}return this.source.join(b)};A.prototype.GetEnumerator=function(){var a=this.source,d=0;return new C(B.Blank,function(){return d<a.length?this.Yield(a[d++]):H},B.Blank)};var u=function(){var e=function(g,d){return Object.prototype.hasOwnProperty.call(g,d)},f=function(d){return d===G?"null":d===undefined?"undefined":typeof d.toString===z.Function?d.toString():Object.prototype.toString.call(d)},a=function(h,i){var g=this;g.Key=h;g.Value=i;g.Prev=G;g.Next=G},c=function(){this.First=G;this.Last=G};c.prototype={AddLast:function(g){var d=this;if(d.Last!=G){d.Last.Next=g;g.Prev=d.Last;d.Last=g}else{d.First=d.Last=g}},Replace:function(g,d){if(g.Prev!=G){g.Prev.Next=d;d.Prev=g.Prev}else{this.First=d}if(g.Next!=G){g.Next.Prev=d;d.Next=g.Next}else{this.Last=d}},Remove:function(d){if(d.Prev!=G){d.Prev.Next=d.Next}else{this.First=d.Next}if(d.Next!=G){d.Next.Prev=d.Prev}else{this.Last=d.Prev}}};var b=function(g){var d=this;d.count=0;d.entryList=new c;d.buckets={};d.compareSelector=g==G?B.Identity:g};b.prototype={Add:function(l,k){var h=this,m=h.compareSelector(l),n=f(m),p=new a(l,k);if(e(h.buckets,n)){for(var d=h.buckets[n],o=0;o<d.length;o++){if(h.compareSelector(d[o].Key)===m){h.entryList.Replace(d[o],p);d[o]=p;return}}d.push(p)}else{h.buckets[n]=[p]}h.count++;h.entryList.AddLast(p)},Get:function(j){var h=this,n=h.compareSelector(j),k=f(n);if(!e(h.buckets,k)){return undefined}for(var m=h.buckets[k],d=0;d<m.length;d++){var l=m[d];if(h.compareSelector(l.Key)===n){return l.Value}}return undefined},Set:function(l,h){var d=this,p=d.compareSelector(l),n=f(p);if(e(d.buckets,n)){for(var q=d.buckets[n],I=0;I<q.length;I++){if(d.compareSelector(q[I].Key)===p){var o=new a(l,h);d.entryList.Replace(q[I],o);q[I]=o;return D}}}return H},Contains:function(h){var d=this,m=d.compareSelector(h),k=f(m);if(!e(d.buckets,k)){return H}for(var l=d.buckets[k],n=0;n<l.length;n++){if(d.compareSelector(l[n].Key)===m){return D}}return H},Clear:function(){this.count=0;this.buckets={};this.entryList=new c},Remove:function(i){var h=this,j=h.compareSelector(i),k=f(j);if(!e(h.buckets,k)){return}for(var d=h.buckets[k],l=0;l<d.length;l++){if(h.compareSelector(d[l].Key)===j){h.entryList.Remove(d[l]);d.splice(l,1);if(d.length==0){delete h.buckets[k]}h.count--;return}}},Count:function(){return this.count},ToEnumerable:function(){var g=this;return new F(function(){var d;return new C(function(){d=g.entryList.First},function(){if(d!=G){var h={Key:d.Key,Value:d.Value};d=d.Next;return this.Yield(h)}return H},B.Blank)})}};return b}(),r=function(d){var c=this;c.Count=function(){return d.Count()};c.Get=function(a){return F.From(d.Get(a))};c.Contains=function(a){return d.Contains(a)};c.ToEnumerable=function(){return d.ToEnumerable().Select(function(b){return new t(b.Key,b.Value)})}},t=function(c,d){this.Key=function(){return c};A.call(this,d)};t.prototype=new A;return F}();